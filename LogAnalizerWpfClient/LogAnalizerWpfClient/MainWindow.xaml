<local:MaterialDesignWindow x:Class="LogAnalizerWpfClient.MainWindow"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                            xmlns:local="clr-namespace:LogAnalizerWpfClient"
                            Title="Alarm Log Analyzer"
                            Height="600" Width="1024"
                            WindowStartupLocation="CenterScreen"
                            WindowStyle="None" ResizeMode="CanResizeWithGrip"
                            Background="{DynamicResource MaterialDesignPaper}">

    <Window.Resources>
        <!-- Кастомная кнопка с анимацией при наведении -->
        <Style x:Key="AnimatedRaisedButton" TargetType="Button" BasedOn="{StaticResource MaterialDesignRaisedButton}">
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <TransformGroup>
                        <ScaleTransform ScaleX="1" ScaleY="1"/>
                        <TranslateTransform Y="0"/>
                    </TransformGroup>
                </Setter.Value>
            </Setter>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="4" ShadowDepth="0" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                 To="1.03" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                 To="1.03" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(TranslateTransform.Y)"
                                                 To="-2" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.Effect).(DropShadowEffect.BlurRadius)"
                                                 To="12" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.Effect).(DropShadowEffect.Opacity)"
                                                 To="0.4" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)"
                                                 To="1" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)"
                                                 To="1" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[1].(TranslateTransform.Y)"
                                                 To="0" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.Effect).(DropShadowEffect.BlurRadius)"
                                                 To="4" Duration="0:0:0.2"/>
                                <DoubleAnimation Storyboard.TargetProperty="(Button.Effect).(DropShadowEffect.Opacity)"
                                                 To="0.2" Duration="0:0:0.2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <DockPanel>
        
        <TextBlock x:Name="SelectedDbText"
                   Foreground="#00FFFF"
                   FontSize="12"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Bottom"
                   Margin="10"/>
        
        <!-- Title bar -->
        <Grid Background="{DynamicResource PrimaryHueMidBrush}" Height="40" DockPanel.Dock="Top" MouseDown="TitleBar_MouseDown">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBlock Text="Alarm Log Analyzer"
                       VerticalAlignment="Center"
                       Margin="16,0"
                       FontWeight="Bold"
                       Foreground="White"
                       FontSize="16"/>
            <StackPanel Orientation="Horizontal" Grid.Column="1">
                <Button Style="{StaticResource MaterialDesignToolForegroundButton}" Click="Minimize_Click" Width="40" Height="40" ToolTip="Minimize">
                    <materialDesign:PackIcon Kind="WindowMinimize"/>
                </Button>
                <Button Style="{StaticResource MaterialDesignToolForegroundButton}" Click="MaximizeRestore_Click" Width="40" Height="40" ToolTip="Maximize/Restore">
                    <materialDesign:PackIcon Kind="WindowRestore"/>
                </Button>
                <Button Style="{StaticResource MaterialDesignToolForegroundButton}" Click="Close_Click" Width="40" Height="40" ToolTip="Close">
                    <materialDesign:PackIcon Kind="Close"/>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Main content -->
        <ScrollViewer>
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,20">
                <TextBlock Text="Select Database Mode:" Margin="0 10 0 5" FontSize="14" />
                <ComboBox x:Name="comboDbMode" Width="250" Margin="0 0 0 10" SelectionChanged="comboDbMode_SelectionChanged">
                    <ComboBoxItem Content="SQL Server" />
                    <ComboBoxItem Content="SQLite" />
                </ComboBox>

                <StackPanel x:Name="sqlServerPanel">
                    <TextBlock Text="Authentication Mode:" Margin="0 10 0 5" FontSize="14" />
                    <ComboBox x:Name="comboAuthMode" Width="250" SelectionChanged="comboAuthMode_SelectionChanged">
                        <ComboBoxItem Content="Trusted Connection" />
                        <ComboBoxItem Content="SQL Authentication" />
                    </ComboBox>

                    <TextBlock Text="Enter Remote Server Name:" Margin="0 10 0 5" FontSize="14" />
                    <TextBox x:Name="txtServerName" Width="300" Height="30" materialDesign:HintAssist.Hint="localhost\YourServerName"/>

                    <StackPanel x:Name="sqlAuthFields" Visibility="Collapsed">
                        <TextBlock Text="Username:" Margin="0 10 0 5" FontSize="14" />
                        <TextBox x:Name="txtLogin" Width="300" />
                        <TextBlock Text="Password:" Margin="0 10 0 5" FontSize="14" />
                        <PasswordBox x:Name="txtPassword" Width="300" />
                    </StackPanel>

                    <Button Content="Connect to Server"
                            Width="240"
                            Style="{StaticResource AnimatedRaisedButton}"
                            Click="btnConnect_Click"
                            Margin="0 20 0 10" />
                </StackPanel>

                <Button x:Name="btnManageDatabases"
                        Content="Manage Databases"
                        Width="240"
                        Click="btnManageDatabases_Click"
                        IsEnabled="False"
                        Style="{StaticResource AnimatedRaisedButton}"
                        Margin="0 5" />

                <Button Content="📊 Compare week by week"
                        Width="240"
                        Click="btnWeekComparison_Click"
                        Style="{StaticResource AnimatedRaisedButton}"
                        Margin="0 5" />

                <Button Content="📅 Compare by date ranges"
                        Width="240"
                        Click="btnCompareByDateRange_Click"
                        Style="{StaticResource AnimatedRaisedButton}"
                        Margin="0 5" />

                <Button Content="Table view by date"
                        Width="240"
                        Click="btnOpenTableDateRange_Click"
                        Style="{StaticResource AnimatedRaisedButton}"
                        Margin="0 5" />

                <Button Content="❌ Exit"
                        Width="240"
                        Click="Close_Click"
                        Style="{StaticResource AnimatedRaisedButton}"
                        Margin="0 20 0 0" />
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</local:MaterialDesignWindow>